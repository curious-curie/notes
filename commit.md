# 좋은 커밋 메시지 쓰기

### 눈치챙겨서 커밋하기

![펭수](http://woman.chosun.com/editor/cheditor_new/attach/2019/AFW9NUB869E9LSXPF1Z4_1.jpg)

(펭수 짤쓰려고 제목 마음대로 갖다붙인 것 아님)

​	커밋 메시지는 규모를 막론한 모든 소프트웨어 개발 프로젝트의 필요불가결한 요소이다. 커밋 메시지는 당신과 당신의 (미래의) 팀원들을 위한 기록이다. 커밋메시지는 개발 관련한 이슈가 있을 때, 당신이 그 이력을 확인할 필요가 있을 때 당신을 도와줄 것이고, 당신이 잠시 개발을 쉬다가 돌아왔을 때 흐름을 읽을 수 있도록 도와줄 것이다. (하루만 쉬어도 이 코드가 대체 왜 쓰였는지 모르겠을 때도 있는데 이게 나만의 경험은 아닐 거라고 믿는다)

​	그리고 커밋 메시지는 내 코드를 접하게 될 다른 사람들을 위해서도 중요하다. 커밋 메시지가 명확할 수록 다른 사람들이 그것을 읽고 이해하기 쉬울 것이다. 커밋 메시지를 알아보기 쉽고 명확하게 쓰는 건 프로젝트에 참여하는 모두를 위해 중요하다. 

## Commit Responsibly

이 [블로그](https://victoria.dev/blog/git-commit-practices-your-future-self-will-thank-you-for/)에서는 "책임감 있는 커밋"을 강조하고 있는데, 나를 비롯하여 이 글을 읽으시는 분들에게 도움이 될 것 같아 가져와 보았다. 

>  **책임감 있는 커밋**
>
> 1. 버그나 빌드되지 않는 커밋을 하지 않도록 테스트를 하거나 제공하기
> 2. 스타일 스펙에 맞는 클린 코드를 작성하기 
> 3. 관련된 논의를 언급하는 설명적인 커밋 메시지 쓰기
> 4. 한 커밋 당 하나만 변화시키고 무관한 변화들을 포함시키지 않기 

그리고, "좋은" 커밋 메시지는 이 문장을 완성시킬 수 있어야 한다:

> 이 커밋이 적용되면, *커밋 메시지* 할(될) 것이다
>
> If applied, this commit will *your subject line here*

그리고 [이 포스트](http://who-t.blogspot.com/2009/12/on-commit-messages.html)에서는 커밋 메시지의 body 부분이 이 질문들에 대답할 수 있어야 한다고 말한다:

>왜 이 커밋이 필요한가?
>
>어떻게 이 커밋이 이슈에 대응하는가?
>
>이 커밋은 어떤 결과를 가져오는가? 

## 어떻게 써야할까?

각각의 커밋 메시지는 변화에 대한 What과 Why를 명확하게 표현해야 한다. 

모두 한번쯤은 읽어봤을 [좋은 커밋 메시지를 위한 7가지 규칙](https://chris.beams.io/posts/git-commit/#seven-rules)을 다시 읽어보자:

> 1. 제목과 본문 사이를 빈 행으로 분리하기 
> 2. 제목은 50글자 이내로 
> 3. 제목 첫 글자는 대문자로
> 4. 제목 끝에 마침표(.) 넣지 않기
> 5. 제목은 명령문으로 쓰기 
> 6. 본문은 72 글자 단위로 개행
> 7. 본문엔 어떻게 보다는 "무엇을, 왜"를 설명하라

* 단순한 변화라면 본문을 쓰지 않아도 된다: `Fix typo in introduction to user guide` 

* 명령문을 쓰는 건 Git 자체의 컨벤션을 따르는 것이다

`git merge` 후에는 이런 메시지가 나온다: `Merge branch 'myfeature'`

`git revert` 후에는 이런 메시지가 나온다:

```
Revert "Add the thing with the stuff"

This reverts commit cc87791524aedd593cff5a74532befe7ab69ce9d.
```

git 자체에서 명령문으로 표현하고 있으니, git의 내부적인 컨벤션을 따르는 것이 마땅해 보인다. 처음에는 어색하지만 Fixed, Updating, Changes… 시제를 바꿔 쓰는 게 오히려 불명확하거나 혼란스러워 보일 수 있겠다. 

### WHY? 에 대답하는 커밋 메시지 

[커밋 메시지의 WHY를 강조한 Ben Orenstein의 트윗](https://twitter.com/r00k/status/1175100703829909505)은 굉장히 설득력있어 보인다. 

> 대부분의 커밋 메시지는 쓸모없는 것에 가깝다. 왜냐면 그것들이 WHY 대신 WHAT이 행해졌냐에 초점을 맞추기 때문이다.
>
> 무엇이 행해졌냐에 초점을 맞추는 건 잘못된 일이다.
>
> 당신은 언제나 커밋이 담고 있는 변화를 재구성할 수 있지만, 그게 행해진 이유를 밝혀내는 것은 거의 불가능하다. 
>
> 당신이 마지막으로 `git blame`을 쓴 적을 생각해보라.
>
> 당신은 거의 "**왜** 이게 이런식이지?"라고 질문했겠지, "이 커밋에서 무슨 일이 일어났는지 한줄로 요약하면 뭐지?"라고 질문하진 않았을 것이다.

이렇게 말하며 그는 이런 커밋 템플릿을 제안한다: 

```
[one line-summary of changes]

Because:
- [relevant context]
- [why you decided to change things]
- [reason you're doing it now]

This commit:
- [does X]
- [does Y]
- [does Z]
```

그는 WHY에 대해 쓰는 것이 나중에 되살리기엔 불가능에 가까운 맥락을 기록하게 해준다고 말한다. 그리고 당신이 왜 그러한 변화를 만들었는지에 대해 답하는 훈련을 함으로써 당신은 더 나은 변화를 만들 수 있게 될 것이라고 말한다. 

이 템플릿을 바탕으로 한 커밋의 [예시1](https://github.com/thoughtbot/upcase/commit/31bc3cfd489c8df506545c4755b434517ea56eab), [예시2](https://github.com/thoughtbot/upcase/commit/c31973ad06bdd013fbea9a7d3d78d1f83d6bcf0c)를 보면 어떻게 써야할 지 감이 잡힐 것이다. 이 템플릿은 What과 Why를 강조하는 규칙 7번과도 일맥상통하는 것 같다. 

커밋 메시지들을 한줄로 띡띡 써왔던 나를 반성하게 하는 말이다… 모든 커밋을 이렇게 쓰는 것은 어렵겠지만 중요하다고 생각되거나 설명이 필요한 커밋들엔 이러한 템플릿을 써보는 연습도 해봐야겠다. 아니 적어도 WHY를 쓰는 연습을 해봐야겠다. 

이 글이 펭수 짤 이상의 도움이 되었길 바라며… 펭바! 